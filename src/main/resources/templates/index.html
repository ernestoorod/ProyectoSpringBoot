<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Página Principal</title>
</head>
<body>
    <header>
        <h1>Bienvenido a la Gestión de Artículos</h1>
        <p>Desde aquí puedes navegar por la aplicación.</p>
    </header>

    <nav>
    <a th:href="@{/}">Inicio</a>

    <span th:if="${session.usuarioLogueado}">
        <a th:href="@{/usuario/perfil}">Perfil</a>
        <a th:href="@{/usuario/logout}">Cerrar Sesión</a>
    </span>

    <span th:unless="${session.usuarioLogueado}">
        <a th:href="@{/usuario/login}">Iniciar Sesión</a>
        <a th:href="@{/usuario/registro}">Registrarse</a>
    </span>
</nav>


    <main>
        <h2>Artículos</h2>
        <div id="article-list">Cargando artículos…</div>
    </main>

    <footer>
        <p>&copy; 2025 Mi Aplicación de Artículos</p>
    </footer>

    <script>
        const apiUrl = '/api/articulos';

        async function loadArticles() {
            const res = await fetch(apiUrl);
            const articles = await res.json();
            const container = document.getElementById('article-list');
            if (!articles.length) {
                container.innerHTML = '<p>No hay artículos disponibles.</p>';
                return;
            }
            container.innerHTML = '';
            articles.forEach(a => {
                const div = document.createElement('div');
                div.style.border = '1px solid #ccc';
                div.style.padding = '1rem';
                div.style.marginBottom = '1rem';
                div.innerHTML = `
                    <h3>${a.nombre}</h3>
                    <p>${a.descripcion}</p>
                    <p>Precio: ${a.precio.toFixed(2)} € | Stock: ${a.stock} | Activo: ${a.activo ? 'Sí' : 'No'}</p>
                `;
                container.appendChild(div);
            });
        }

        // Cargar lista al cargar la página
        document.addEventListener('DOMContentLoaded', loadArticles);
    </script>
</body>
</html>
